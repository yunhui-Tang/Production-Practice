(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a06ea50"],{"4cb0":function(e,t,n){},bb70:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{attrs:{bordered:!1}},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery(t)}}},[n("a-row",{attrs:{gutter:24}},[n("a-col",{attrs:{span:6}},[n("a-form-item",{attrs:{label:"标题"}},[n("a-input",{attrs:{placeholder:"请输入标题"},model:{value:e.queryParam.titile,callback:function(t){e.$set(e.queryParam,"titile",t)},expression:"queryParam.titile"}})],1)],1),n("a-col",{attrs:{span:6}},[n("a-form-item",{attrs:{label:"发布人"}},[n("a-input",{attrs:{placeholder:"请输入发布人"},model:{value:e.queryParam.sender,callback:function(t){e.$set(e.queryParam,"sender",t)},expression:"queryParam.sender"}})],1)],1),n("a-col",{attrs:{span:8}},[n("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[n("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("查询")]),n("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"reload"},on:{click:e.searchReset}},[e._v("重置")])],1)])],1)],1)],1),n("div",{staticClass:"table-operator"},[n("a-button",{attrs:{type:"primary",icon:"book"},on:{click:e.readAll}},[e._v("全部标注已读")])],1),n("a-table",{ref:"table",attrs:{size:"default",bordered:"",rowKey:"id",columns:e.columns,dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"action",fn:function(t,a){return n("span",{},[n("a",{on:{click:function(t){return e.showAnnouncement(a)}}},[e._v("查看")])])}}])}),n("show-announcement",{ref:"ShowAnnouncement"}),n("dynamic-notice",{ref:"showDynamNotice",attrs:{path:e.openPath,formData:e.formData}})],1)},o=[],s=(n("ca00"),n("0fea")),r=n("2bd9"),i=n("b65a"),c=n("4eaf"),l={name:"UserAnnouncementList",mixins:[i["a"]],components:{DynamicNotice:c["default"],ShowAnnouncement:r["default"]},data:function(){return{description:"系统通告表管理页面",queryParam:{},columns:[{title:"标题",align:"center",dataIndex:"titile"},{title:"消息类型",align:"center",dataIndex:"msgCategory",customRender:function(e){return"1"==e?"通知公告":"2"==e?"系统消息":e}},{title:"发布人",align:"center",dataIndex:"sender"},{title:"发布时间",align:"center",dataIndex:"sendTime"},{title:"优先级",align:"center",dataIndex:"priority",customRender:function(e){return"L"==e?"低":"M"==e?"中":"H"==e?"高":e}},{title:"阅读状态",align:"center",dataIndex:"readFlag",customRender:function(e){return"0"==e?"未读":"1"==e?"已读":e}},{title:"操作",dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}],url:{list:"/sys/sysAnnouncementSend/getMyAnnouncementSend",editCementSend:"sys/sysAnnouncementSend/editByAnntIdAndUserId",readAllMsg:"sys/sysAnnouncementSend/readAll"},loading:!1,openPath:"",formData:""}},methods:{handleDetail:function(e){this.$refs.sysAnnouncementModal.detail(e),this.$refs.sysAnnouncementModal.title="查看"},showAnnouncement:function(e){var t=this;Object(s["j"])(this.url.editCementSend,{anntId:e.anntId}).then((function(n){n.success&&(t.loadData(),t.syncHeadNotic(e.anntId))})),"component"===e.openType?(this.openPath=e.openPage,this.formData={id:e.busId},this.$refs.showDynamNotice.detail()):this.$refs.ShowAnnouncement.detail(e)},syncHeadNotic:function(e){Object(s["c"])("sys/annountCement/syncNotic",{anntId:e})},readAll:function(){var e=this;e.$confirm({title:"确认操作",content:"是否全部标注已读?",onOk:function(){Object(s["j"])(e.url.readAllMsg).then((function(t){t.success&&(e.$message.success(t.message),e.loadData(),e.syncHeadNotic())}))}})}}},d=l,u=(n("e758"),n("2877")),m=Object(u["a"])(d,a,o,!1,null,"a80aaa5e",null);t["default"]=m.exports},e758:function(e,t,n){"use strict";var a=n("4cb0"),o=n.n(a);o.a}}]);